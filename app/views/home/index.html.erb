  

<div class="col-sm-4" style="margin-top:20px;" align="center"><a href="/users/sign_out">로그아웃</a>
<%= current_user.email %> </div>


<br>

 
    <form action="/home/upload" method="POST" enctype="multipart/form-data"> <div class="col-sm-3">
      <input class="btn btn-warning" value="업로드" type="file" name="pic" accept="file_extension|audio/*|video/*|image/*|media_type">  
     </div>
      <input type="submit" class="btn btn-warning" value="보내기"> 
    </form>
   
   
 <br>
 <center>업로드된 동영상은 관리자가 적절히 편집해서 게재합니다.</center>
<br><br><br><center><h1>Gum</h1></center>


 
<div class="container">
       
 
 
</div>  
<center>
 
    <% @posts.each do |p| %>

        <div class="row-sm-1"><br><br><div class="btn btn-warning">
    
            <center><%= p.title %></center><br>
            <!--<iframe src="" width="500" height="281" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true"></iframe> -->
            <p><iframe width="500" height="315" src="<%= p.video %>?amp;autoplay=1" frameborder="0" allowfullscreen></iframe></p>
         
         
                     <div align="left" class="reply_<%=p.id%>">
                          <% p.replies.each do |r| %>
                            <p><%=  r.content %></p>
    <% end %>
                 </div>
 
   
         
        <input type="hidden" value="<%=p.id %>" name="id_of_post">
          <input type="text" name="content" class="form-control" rows="5" id="content_<%= p.id %>" placeholder="댓글을 입력해주세요"><br>
          <button value="<%=p.id%>" type="submit" class="btn btn-default reply_submit">Submit</button>
        </div>
       
      </div>
     
  
<% end %>
       </div>
        
      


</center>



<script>
    $(function(){
    $(".reply_submit").click(function(){
    post_id = this.value;
    content = $("#content_" + post_id).val();

        $.ajax({
          method: "POST",
          url: "/home/reply_write",
          data: { content: content, id_of_post: post_id },
         success: function(){
             
            $( ".reply_" + post_id ).append( "<p>" + content + "</p>");
            $("#content_" + post_id).val('');
             alert("리플이 작성되었습니다.");
         },
         error: function() {
             alert("리플이 작성되지 않았습니다.");
        }
  })
});
});

 
 </script>
 
   
